{"version":3,"sources":["webpack:///./src/api/profile.js","webpack:///./src/views/Login.vue?9e64","webpack:///./src/assets/images/logo.png","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?f1df"],"names":["register","data","http","post","login","logout","module","exports","class","style","title","round","width","height","src","onSubmit","state","email","name","label","placeholder","rules","password","type","$router","push","block","native-type","setup","router","store","values","then","response","console","log","success","window","sessionStorage","setItem","access_token","commit","setTimeout","go","catch","error","fail","components","Navbar","Tabbar","render","__scopeId"],"mappings":"yIAAA,sHAGO,SAASA,EAASC,GACvB,OAAOC,OAAKC,KAAK,qBAAsBF,GAGlC,SAASG,EAAMH,GACpB,OAAOC,OAAKC,KAAK,kBAAmBF,GAG/B,SAASI,IACd,OAAOH,OAAKC,KAAK,sB,kCCZnB,W,uBCAAG,EAAOC,QAAU,IAA0B,yB,sICEpCC,MAAM,Q,GAuBFC,MAAA,iB,iBAEyD,Q,sRA1BlE,eAA8B,GAAtBC,MAAM,SACd,eA8BM,MA9BN,EA8BM,CA7BJ,eAKE,GAJEC,MAAA,GACAC,MAAM,OACNC,OAAO,OACNC,IAAK,EAAQ,S,gBAElB,eAsBW,GAtBA,SAAQ,EAAAC,UAAQ,C,WACzB,iBAME,CANF,eAME,G,WALW,EAAAC,MAAMC,M,qDAAN,EAAAD,MAAMC,MAAK,IACpBC,KAAK,MACLC,MAAM,MACNC,YAAY,MACXC,MAAO,CAAC,CAAD,gC,uBAEZ,eAOE,G,WANW,EAAAL,MAAMM,S,qDAAN,EAAAN,MAAMM,SAAQ,IACvBC,KAAK,WACLL,KAAK,KACLC,MAAM,KACNC,YAAY,KACXC,MAAO,CAAC,CAAD,+B,uBAEZ,eAKM,MALN,EAKM,CAJJ,eAAsE,KAAnEb,MAAM,aAAc,QAAK,+BAAE,EAAAgB,QAAQC,KAAI,gBAAe,aACzD,eAEa,GAFDd,MAAA,GAAMe,MAAA,GAAMH,KAAK,UAAUI,cAAY,U,YAAS,iBAE5D,C,yCAIN,eAAiB,I,+EAYJ,GACbT,KAAM,QACNU,MAFa,WAGX,IAAMC,EAAS,iBACTC,EAAQ,iBACRd,EAAQ,eAAS,CACrBM,SAAU,GACVL,MAAO,KAEHF,EAAW,SAACgB,GAChB,eAAMf,GAAOgB,MAAK,SAACC,GACjBC,QAAQC,IAAIF,GACZ,OAAMG,QAAQ,QACdC,OAAOC,eAAeC,QAAQ,QAASN,EAASO,cAChDV,EAAMW,OAAO,cAAa,GAC1BC,YAAW,WACTb,EAAOc,IAAI,KACV,QACFC,OAAM,SAAAC,GAEPX,QAAQC,IAAIU,GACZ,OAAMC,KAAK,YAGf,MAAO,CACL9B,QACAD,aAGJgC,WAAY,CACVC,SAAA,KACAC,SAAA,O,UCvEJ,EAAOC,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-20113309.e482e301.js","sourcesContent":["import http from './http'\n\n// 用户注册\nexport function register(data) {\n  return http.post('/api/auth/register', data)\n}\n// 用户登录\nexport function login(data) {\n  return http.post('/api/auth/login', data)\n}\n// 用户登录\nexport function logout() {\n  return http.post('/api/auth/logout')\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=5371a924&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/logo.82b9c7a5.png\";","<template>\n  <Navbar title=\"用户登录\"></Navbar>\n  <div class=\"main\">\n    <van-image\n        round\n        width=\"3rem\"\n        height=\"3rem\"\n        :src=\"require('@/assets/images/logo.png')\"\n    />\n    <van-form @submit=\"onSubmit\">\n      <van-field\n          v-model=\"state.email\"\n          name=\"邮箱号\"\n          label=\"邮箱号\"\n          placeholder=\"邮箱号\"\n          :rules=\"[{ required: true, message: '请填写邮箱号' }]\"\n      />\n      <van-field\n          v-model=\"state.password\"\n          type=\"password\"\n          name=\"密码\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n      />\n      <div style=\"margin: 16px;\">\n        <p class=\"login-link\" @click=\"$router.push('/register')\">没有账号？立即注册</p>\n        <van-button round block type=\"primary\" native-type=\"submit\">\n          登录\n        </van-button>\n      </div>\n    </van-form>\n  </div>\n  <Tabbar></Tabbar>\n</template>\n\n<script>\nimport {reactive} from \"vue\";\nimport {useRouter} from \"vue-router\";\nimport {useStore} from \"vuex\"\nimport {Toast} from \"vant\";\nimport {login} from \"@/api/profile\";\nimport Navbar from \"@/components/common/Navbar\";\nimport Tabbar from \"@/components/common/Tabbar\";\n\nexport default {\n  name: \"Login\",\n  setup() {\n    const router = useRouter()\n    const store = useStore()\n    const state = reactive({\n      password: '',\n      email: ''\n    });\n    const onSubmit = (values) => {\n      login(state).then((response) => {\n        console.log(response)\n        Toast.success('登录成功')\n        window.sessionStorage.setItem('token', response.access_token)\n        store.commit('setIsLogin',true)\n        setTimeout(() => {\n          router.go(-1)\n        }, 1000)\n      }).catch(error => {\n        //发生错误时执行的代码\n        console.log(error)\n        Toast.fail('登录失败');\n      })\n    }\n    return {\n      state,\n      onSubmit,\n    };\n  },\n  components: {\n    Navbar,\n    Tabbar,\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.main {\n  margin-top: 50px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.login-link {\n  text-align: center;\n  color: skyblue;\n  font-size: 14px;\n}\n\n.van-image {\n  margin-top: 50px;\n  margin-bottom: 50px;\n}\n\n.van-form {\n  width: 90%;\n}\n</style>\n","import { render } from \"./Login.vue?vue&type=template&id=5371a924&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=5371a924&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5371a924\"\n\nexport default script"],"sourceRoot":""}